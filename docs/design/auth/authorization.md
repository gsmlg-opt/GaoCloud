# 用户权限验证
## 概要
支持namespace粒度的权限认证

## 动机和目标
作为一个云管理系统，必须支持多个用户共享资源，从而要求限制
每个用户能够查看和管理的资源来实现用户隔离。
singlecloud通过使用namespace来区分不同的用户。

## 详细设计
使用集群（cluster)和名字空间（namespace）组合来定义权限
支持所有cluster和某个cluster的所有名字空间的权限
出于设计简化的目的，一个名字空间下不再区分更细粒度的权限设置
权限本身没有唯一性的限制，也就支持一个namespace被不同的用户共享

### 验证流程
权限验证是在用户的认证模块之后，通过请求的上下文获取当前用户名，
通过用户名获取用户权限，从而得到用户能够访问的集群和名字空间信息
由于url使用rest接口设计，通过url可以获取请求要访问的集群和名字空间
通过对照权限数据，决定用户是否有相应的权限。

### 非集群下的资源权限管理
#### 用户
只有admin用户才能创建，和修改用户的权限
用户自己只能查看自己的用户信息，以及重置密码

#### 资源申请
资源申请本身不属于任何集群
只有admin用户和创建资源申请的用户，才可以管理自己创建的资源申请
只有admin用户才能同意和驳回志愿申请
